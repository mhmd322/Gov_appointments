{% extends 'base.html' %}
{% load static %}

{% block title %}طلباتي | الخدمات الإلكترونية السورية{% endblock %}

{% block content %}
<section class="max-w-5xl mx-auto mt-12 p-8 bg-white rounded-xl shadow-lg text-right" dir="rtl">
  <div class="flex items-center justify-center gap-4 mb-8">
    <img src="{% static 'img/logo.jpg' %}" alt="شعار سوريا" class="w-12 h-12">
    <div>
      <h2 class="text-2xl font-bold text-blue-900">الجمهورية العربية السورية</h2>
      <p class="text-gray-700">منصة عرض الطلبات السابقة</p>
    </div>
  </div>

  <h3 class="text-xl font-semibold text-gray-800 mb-6 text-center">طلباتي السابقة</h3>

  <div class="overflow-x-auto">
    <table class="w-full text-sm border border-gray-200 text-right">
      <thead class="bg-gray-100 text-gray-700 font-semibold">
        <tr>
          <th class="p-3 border">الخدمة</th>
          <th class="p-3 border">الاسم</th>
          <th class="p-3 border">الرقم الوطني</th>
          <th class="p-3 border">الحالة</th>
          <th class="p-3 border">تاريخ التقديم</th>
        </tr>
      </thead>
      <tbody>
        {% for req in requests %}
        <tr class="hover:bg-gray-50">
          <td class="p-3 border">{{ req.service.name }}</td>
          <td class="p-3 border">{{ req.full_name }}</td>
          <td class="p-3 border">{{ req.national_id }}</td>
          <td class="p-3 border">
            <span class="px-2 py-1 rounded text-white text-sm
              {% if req.status == 'مقبول' %}bg-green-600
              {% elif req.status == 'مرفوض' %}bg-red-600
              {% else %}bg-yellow-500{% endif %}">
              {{ req.status }}
            </span>
          </td>
          <td class="p-3 border">{{ req.submitted_at|date:"Y-m-d H:i" }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5" class="text-center p-4 text-gray-500">لا يوجد طلبات حالياً.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>
{% endblock %}
