{% load static %}
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ุงูููุตุฉ ุงูุญููููุฉ ุงูุณูุฑูุฉ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      AOS.init({ duration: 800, once: true });
      const welcomeMessage = document.getElementById("welcome-popup");
      if (welcomeMessage) {
        setTimeout(() => welcomeMessage.classList.remove("hidden"), 500);
        setTimeout(() => welcomeMessage.classList.add("hidden"), 5000);
      }
    });
  </script>
</head>
<body class="bg-gray-50 text-gray-900">
  {% if messages %}
    <div id="welcome-popup" class="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg hidden z-50">
      {% for message in messages %}{{ message }}{% endfor %}
    </div>
  {% endif %}

  <header class="bg-blue-900 text-white shadow sticky top-0 z-50">
    <div class="max-w-7xl mx-auto flex flex-row-reverse justify-between items-center px-6 py-3">
      <a href="/" class="flex items-center gap-2">
        <img src="{% static 'img/logo.jpg' %}" alt="ุดุนุงุฑ ุงูุฌูููุฑูุฉ" class="w-10 h-10" />
        <span class="font-bold text-lg md:text-xl whitespace-nowrap">ุงูุฌูููุฑูุฉ ุงูุนุฑุจูุฉ ุงูุณูุฑูุฉ</span>
      </a>

      <div class="flex flex-row-reverse items-center gap-6">
        <nav class="flex gap-2 md:gap-4 items-center text-sm md:text-base">
          <a href="/" class="hover:underline">ุงูุฑุฆูุณูุฉ</a>
          <a href="/services/" class="hover:underline">ุงูุฎุฏูุงุช</a>

          {% if user.is_authenticated %}
            {% if user_role == UserRole.CITIZEN %}
              <a href="{% url 'my-requests' %}" class="hover:underline">ุทูุจุงุชู</a>
              <a href="/appointments/booking/" class="hover:underline">ุญุฌุฒ ููุนุฏ</a>
              <a href="/appointments/my_appointments/" class="hover:underline">ููุงุนูุฏู</a>
              <a href="{% url 'profile' %}" class="hover:underline">ูููู ุงูุดุฎุตู</a>
              

            {% elif user_role == UserRole.EMPLOYEE %}
              <a href="{% url 'employee-requests' %}" class="hover:underline">ุทูุจุงุช ุงูููุงุทููู</a>
              <a href="{% url 'employee-dashboard' %}" class="hover:underline">ุญุฌูุฒุงุช ุงูููุงุทููู</a>
              <a href="{% url 'profile' %}" class="hover:underline">ูููู ุงูุดุฎุตู</a>

            {% elif user_role == UserRole.ADMIN %}
              <a href="{% url 'admin-appointments' %}" class="hover:underline">ููุงุนูุฏ ุงููุณุคูู</a>
              <a href="{% url 'admin-stats' %}" class="hover:underline">ููุญุฉ ุงูุงุญุตุงุฆูุงุช</a>
              <a href="{% url 'profile' %}" class="hover:underline">ูููู ุงูุดุฎุตู</a>

            {% else %}
              <a href="/appointments/booking/" class="hover:underline">ุญุฌุฒ ููุนุฏ</a>
              <a href="/appointments/my_appointments/" class="hover:underline">ููุงุนูุฏู</a>
              <a href="{% url 'profile' %}" class="hover:underline">ูููู ุงูุดุฎุตู</a>
            {% endif %}
          {% endif %}
        </nav>

        {% if user.is_authenticated %}
        <div class="flex items-center gap-4">
         <div class="bg-green-100 text-green-800 px-4 py-1 rounded-full shadow flex items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-600" viewBox="0 0 20 20" fill="currentColor">
           <path d="M10 2a6 6 0 00-6 6v2a4 4 0 01-1 2.65V14a2 2 0 002 2h10a2 2 0 002-2v-1.35A4 4 0 0116 10V8a6 6 0 00-6-6z" />
          </svg>
          <span class="font-semibold">ูุฑุญุจุงูุ {{ user.username }}</span>
         </div>
  
         <form method="post" action="{% url 'logout' %}">
          {% csrf_token %}
          <button type="submit" class="bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded shadow">ุชุณุฌูู ุงูุฎุฑูุฌ</button>
         </form>
        </div>
        {% else %}
          <div class="flex items-center gap-2">
            <a href="/accounts/login/" class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded">ุฏุฎูู</a>
            <a href="/accounts/register/" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded">ุชุณุฌูู</a>
          </div>
        {% endif %}
      </div>
    </div>
  </header>

  <main>
    {% block content %}{% endblock %}
  </main>

  <footer class="bg-white mt-12 border-t py-6 text-center text-sm text-gray-600">
    <div class="flex flex-col items-center gap-2">
      <img src="{% static 'img/flag.png' %}" alt="ุนูู ุณูุฑูุง" class="w-12 h-auto" />
      <p>ยฉ ุงูุฌูููุฑูุฉ ุงูุนุฑุจูุฉ ุงูุณูุฑูุฉ โ ุฌููุน ุงูุญููู ูุญููุธุฉ</p>
      <p>๐ ุฏูุดูุ ุณูุฑูุง โ โ 011-1234567</p>
    </div>
  </footer>
</body>
</html>
